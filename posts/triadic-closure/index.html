<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Measuring network clustering">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Triadic Closure (Clustering) | Data Science With Python</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://necromuralist.github.io/data_science/posts/triadic-closure/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML">
</script><meta name="author" content="hades">
<link rel="prev" href="../assignment-2-introduction-to-nltk/" title="Assignment 2 - Introduction to NLTK" type="text/html">
<link rel="next" href="../distance-in-social-networks/" title="Distance in Social Networks" type="text/html">
<meta property="og:site_name" content="Data Science With Python">
<meta property="og:title" content="Triadic Closure (Clustering)">
<meta property="og:url" content="https://necromuralist.github.io/data_science/posts/triadic-closure/">
<meta property="og:description" content="Measuring network clustering">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-09-23T16:48:00-07:00">
<meta property="article:tag" content="networks">
</head>
<body>
<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

<!-- Menubar -->

<nav class="navbar navbar-default navbar-static-top"><div class="container">
<!-- This keeps the margins nice -->
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-navbar" aria-controls="bs-navbar" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://necromuralist.github.io/data_science/">

                <span id="blog-title">Data Science With Python</span>
            </a>
        </div>
<!-- /.navbar-header -->
        <div class="collapse navbar-collapse" id="bs-navbar" aria-expanded="false">
            <ul class="nav navbar-nav">
<li class="dropdown">
<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Projects <b class="caret"></b></a>
            <ul class="dropdown-menu"><li>
<a href="../../pages/portland-unemployment-2007-to-2017">Portland Unemployment Visualization</a>
            </li></ul>
</li>
<li>
<a href="../../archive.html">Archive</a>
                </li>
<li>
<a href="../../categories/">Tags</a>
                </li>
<li>
<a href="../../rss.xml">RSS feed</a>

                
            </li>
</ul>
<!-- Google custom search --><form method="get" action="https://www.google.com/search" class="navbar-form
 navbar-right" role="search">
<div class="form-group">
<input type="text" name="q" class="form-control" placeholder="Search">
</div>
<button type="submit" class="btn btn-primary">
<span class="glyphicon glyphicon-search"></span>
</button>
<input type="hidden" name="sitesearch" value="https://necromuralist.github.io/data_science/">
</form>
<!-- End of custom search -->


            <ul class="nav navbar-nav navbar-right">
<li>
    <a href="index.rst" id="sourcelink">Source</a>
    </li>

                
            </ul>
</div>
<!-- /.navbar-collapse -->
    </div>
<!-- /.container -->
</nav><!-- End of Menubar --><div class="container" id="content" role="main">
    <div class="body-content">
        <!--Body content-->
        <div class="row">
            
            
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="." class="u-url">Triadic Closure (Clustering)</a></h1>

        <div class="metadata">
            <p class="byline author vcard"><span class="byline-name fn" itemprop="author">
                    <a href="../../authors/hades/">hades</a>
            </span></p>
            <p class="dateline"><a href="." rel="bookmark"><time class="published dt-published" datetime="2017-09-23T16:48:00-07:00" itemprop="datePublished" title="2017-09-23 16:48">2017-09-23 16:48</time></a></p>
            
        <p class="sourceline"><a href="index.rst" class="sourcelink">Source</a></p>

        </div>
        

    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<div class="section" id="introduction">
<h2>Introduction</h2>
<p><strong>Triadic Closure</strong> is a measure of the tendency of edges in a graph to form triangles. It's a measure of the degree to which nodes in a graph tend to cluster together (<a class="reference external" href="https://en.wikipedia.org/wiki/Clustering_coefficient">wikipedia on clustering coefficents</a>).</p>
<pre class="code ipython"><a name="rest_code_8f44b6e80ac34463a93e449c8818dbda-1"></a><span class="c1"># python standard library</span>
<a name="rest_code_8f44b6e80ac34463a93e449c8818dbda-2"></a><span class="kn">from</span> <span class="nn">fractions</span> <span class="kn">import</span> <span class="n">Fraction</span>
<a name="rest_code_8f44b6e80ac34463a93e449c8818dbda-3"></a>
<a name="rest_code_8f44b6e80ac34463a93e449c8818dbda-4"></a><span class="c1"># pypi</span>
<a name="rest_code_8f44b6e80ac34463a93e449c8818dbda-5"></a><span class="kn">import</span> <span class="nn">networkx</span>
<a name="rest_code_8f44b6e80ac34463a93e449c8818dbda-6"></a><span class="kn">import</span> <span class="nn">seaborn</span>
</pre>
<pre class="code ipython"><a name="rest_code_12e3495cfce04725b8873559698c290b-1"></a><span class="o">%</span> <span class="n">matplotlib</span> <span class="n">inline</span>
<a name="rest_code_12e3495cfce04725b8873559698c290b-2"></a><span class="n">seaborn</span><span class="o">.</span><span class="n">set_style</span><span class="p">(</span><span class="s2">"whitegrid"</span><span class="p">)</span>
</pre>
<pre class="code ipython"><a name="rest_code_ecb5cf9996ea4fd5a0b3aa2b7b075521-1"></a><span class="n">sample_graph</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<a name="rest_code_ecb5cf9996ea4fd5a0b3aa2b7b075521-2"></a><span class="n">sample_graph</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">)])</span>
<a name="rest_code_ecb5cf9996ea4fd5a0b3aa2b7b075521-3"></a><span class="n">networkx</span><span class="o">.</span><span class="n">draw_spring</span><span class="p">(</span><span class="n">sample_graph</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre>
<img alt="triadic_closure.png" src="triadic_closure.png"><p>In this case we might say that the likelihood that the next edge will be between 1 and 4 or 1 and 5 is greater than the likelihood that it will form between 4 and 5 or 2 and 5.</p>
</div>
<div class="section" id="local-clustering-coefficient">
<h2>2 Local Clustering Coefficient</h2>
<p>The <strong>Local Clustering Coefficient</strong> is a measure of clustering for a single node. It is the number of pairs of a node's friends that are themselves friends divided by the total number of pairs of a node's friends. This can be interpreted as measuring how close the node's neighbors are to being a complete graph (<a class="reference external" href="https://en.wikipedia.org/wiki/Clustering_coefficient#Local_clustering_coefficient">wikipedia</a>).</p>
<div class="math">
\begin{equation*}
LCC = \frac{\textit{number of pairs of a node's friends that are friends (PTAF)}}{\textit{number of pairs of the node's friends (POF)}}
\end{equation*}
</div>
<pre class="code ipython"><a name="rest_code_d1651c7ea12d472f902b6498bb3d4a06-1"></a><span class="n">graph</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<a name="rest_code_d1651c7ea12d472f902b6498bb3d4a06-2"></a><span class="n">graph</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">"A"</span><span class="p">,</span> <span class="s2">"K"</span><span class="p">),</span> <span class="p">(</span><span class="s2">"A"</span><span class="p">,</span> <span class="s2">"B"</span><span class="p">),</span> <span class="p">(</span><span class="s2">"A"</span><span class="p">,</span> <span class="s2">"C"</span><span class="p">),</span>
<a name="rest_code_d1651c7ea12d472f902b6498bb3d4a06-3"></a>                      <span class="p">(</span><span class="s2">"B"</span><span class="p">,</span> <span class="s2">"K"</span><span class="p">),</span> <span class="p">(</span><span class="s2">"B"</span><span class="p">,</span> <span class="s2">"C"</span><span class="p">),</span>
<a name="rest_code_d1651c7ea12d472f902b6498bb3d4a06-4"></a>                      <span class="p">(</span><span class="s2">"C"</span><span class="p">,</span> <span class="s2">"E"</span><span class="p">),</span> <span class="p">(</span><span class="s2">"C"</span><span class="p">,</span> <span class="s2">"F"</span><span class="p">),</span>
<a name="rest_code_d1651c7ea12d472f902b6498bb3d4a06-5"></a>                      <span class="p">(</span><span class="s2">"D"</span><span class="p">,</span> <span class="s2">"E"</span><span class="p">),</span>
<a name="rest_code_d1651c7ea12d472f902b6498bb3d4a06-6"></a>                      <span class="p">(</span><span class="s2">"E"</span><span class="p">,</span> <span class="s2">"F"</span><span class="p">),</span> <span class="p">(</span><span class="s2">"E"</span><span class="p">,</span> <span class="s2">"H"</span><span class="p">),</span>
<a name="rest_code_d1651c7ea12d472f902b6498bb3d4a06-7"></a>                      <span class="p">(</span><span class="s2">"F"</span><span class="p">,</span> <span class="s2">"G"</span><span class="p">),</span>
<a name="rest_code_d1651c7ea12d472f902b6498bb3d4a06-8"></a>                      <span class="p">(</span><span class="s2">"I"</span><span class="p">,</span> <span class="s2">"J"</span><span class="p">)])</span>
<a name="rest_code_d1651c7ea12d472f902b6498bb3d4a06-9"></a>
<a name="rest_code_d1651c7ea12d472f902b6498bb3d4a06-10"></a>
<a name="rest_code_d1651c7ea12d472f902b6498bb3d4a06-11"></a>                      <span class="o">..</span> <span class="n">ggcode</span><span class="p">::</span> <span class="n">ipython</span>
<a name="rest_code_d1651c7ea12d472f902b6498bb3d4a06-12"></a>
<a name="rest_code_d1651c7ea12d472f902b6498bb3d4a06-13"></a><span class="n">networkx</span><span class="o">.</span><span class="n">draw_spring</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre>
<img alt="triadic_example.png" src="triadic_example.png"><p>The number of pairs of friends can be calculated from the degree of the node.</p>
<div class="math">
\begin{equation*}
POF = \frac{d(d-1)}{2}
\end{equation*}
</div>
<p>Looking at node C, it has degree four so the number of pairs of friends it has is <span class="math">\(\frac{4(3)}{2} = 6\)</span>. Looking at the graph you can see that there are two edges between the nodes connected to it - (A,B) and (E, F), so the clustering coefficient for node C is <span class="math">\(\frac{PTAF}{POF}=\frac{2}{6}\)</span> which reduces to 1/3. We can double check this with networkx.</p>
<pre class="code ipython"><a name="rest_code_f97a8214089d44a09b3f5bde030c1497-1"></a><span class="k">print</span><span class="p">(</span><span class="n">networkx</span><span class="o">.</span><span class="n">clustering</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="s2">"C"</span><span class="p">))</span>
</pre>
<pre class="literal-block">
0.3333333333333333
</pre>
<p>If you don't pass in the node label to <tt class="docutils literal">networkx.clustering</tt> the function will return a dictionary with all the clustering coefficients, which might be useful if you need to make multiple queries and have a large graph.</p>
<div class="section" id="one-friend">
<h3>2.1 One Friend</h3>
<p>If you look at nodes I and J, they don't have any pairs of friends, just one friend each. This puts a zero in the denominator of the clustering coefficient, making it undefined, but to make it mathematically useful it is given a 0 instead.</p>
<pre class="code ipython"><a name="rest_code_aa1535770c0c4647bf2ff15930a7bfef-1"></a><span class="k">print</span><span class="p">(</span><span class="n">networkx</span><span class="o">.</span><span class="n">clustering</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="s2">"I"</span><span class="p">))</span>
</pre>
<pre class="literal-block">
0.0
</pre>
</div>
</div>
<div class="section" id="the-whole-network">
<h2>3 The Whole Network</h2>
<p>There's two ways to calculate a clustering coefficient for the entire network. One is to take the average of all the local clustering coefficients, the other is to calculate the percentage of open triads (three nodes connected by two edges) that are triangles.</p>
<div class="section" id="averaging">
<h3>3.1 Averaging</h3>
<p>This is what wikipedia calls the <a class="reference external" href="https://en.wikipedia.org/wiki/Clustering_coefficient#Network_average_clustering_coefficient">network average clustering coefficient</a>.</p>
<pre class="code ipython"><a name="rest_code_f17eb6489ebe4c13907636c12df0b7c3-1"></a><span class="n">coefficients</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">clustering</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
<a name="rest_code_f17eb6489ebe4c13907636c12df0b7c3-2"></a><span class="n">average</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">coefficients</span><span class="o">.</span><span class="n">values</span><span class="p">())</span><span class="o">/</span><span class="nb">len</span><span class="p">(</span><span class="n">coefficients</span><span class="p">)</span>
<a name="rest_code_f17eb6489ebe4c13907636c12df0b7c3-3"></a><span class="k">print</span><span class="p">(</span><span class="n">average</span><span class="p">)</span>
<a name="rest_code_f17eb6489ebe4c13907636c12df0b7c3-4"></a><span class="k">assert</span> <span class="n">average</span> <span class="o">==</span> <span class="n">networkx</span><span class="o">.</span><span class="n">average_clustering</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</pre>
<pre class="literal-block">
0.28787878787878785
</pre>
</div>
<div class="section" id="transitivity">
<h3>3.2 Transitivity</h3>
<p>This is also called the <a class="reference external" href="https://en.wikipedia.org/wiki/Clustering_coefficient#Global_clustering_coefficient">global clustering coefficient</a>.</p>
<p>A <em>triangle</em> is a set of three nodes with three edges connecting them.  An <em>open triad</em> is a set of three nodes with only two edges connecting them. Each triangle has three open triads embedded in it. <em>Transivity</em> is a measure of the percentage of open triads that are triangles.</p>
<p>This triangle:</p>
<pre class="code ipython"><a name="rest_code_dbccde1a43154bbd8b3b7efe5671df5f-1"></a><span class="n">triangle</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<a name="rest_code_dbccde1a43154bbd8b3b7efe5671df5f-2"></a><span class="n">triangle</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">"A"</span><span class="p">,</span> <span class="s2">"B"</span><span class="p">),</span> <span class="p">(</span><span class="s2">"A"</span><span class="p">,</span> <span class="s2">"C"</span><span class="p">),</span> <span class="p">(</span><span class="s2">"B"</span><span class="p">,</span> <span class="s2">"C"</span><span class="p">)])</span>
<a name="rest_code_dbccde1a43154bbd8b3b7efe5671df5f-3"></a>
<a name="rest_code_dbccde1a43154bbd8b3b7efe5671df5f-4"></a><span class="n">networkx</span><span class="o">.</span><span class="n">draw_spring</span><span class="p">(</span><span class="n">triangle</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre>
<img alt="tc_one.png" src="tc_one.png"><p>Contains these open triads.</p>
<pre class="code ipython"><a name="rest_code_1e7b13817bfe429f8b266836359df434-1"></a><span class="n">one</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<a name="rest_code_1e7b13817bfe429f8b266836359df434-2"></a><span class="n">one</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">"A"</span><span class="p">,</span> <span class="s2">"B"</span><span class="p">),</span> <span class="p">(</span><span class="s2">"A"</span><span class="p">,</span> <span class="s2">"C"</span><span class="p">)])</span>
<a name="rest_code_1e7b13817bfe429f8b266836359df434-3"></a><span class="n">networkx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">one</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre>
<img alt="tc_a.png" src="tc_a.png"><pre class="code ipython"><a name="rest_code_c557edaeb7374b639d816181d9930deb-1"></a><span class="n">two</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<a name="rest_code_c557edaeb7374b639d816181d9930deb-2"></a><span class="n">two</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">"A"</span><span class="p">,</span> <span class="s2">"B"</span><span class="p">),</span> <span class="p">(</span><span class="s2">"B"</span><span class="p">,</span> <span class="s2">"C"</span><span class="p">)])</span>
<a name="rest_code_c557edaeb7374b639d816181d9930deb-3"></a><span class="n">networkx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">two</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre>
<img alt="tc_b.png" src="tc_b.png"><pre class="code ipython"><a name="rest_code_313edec5827949bc8fd4b9d4e415bc4e-1"></a><span class="n">three</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<a name="rest_code_313edec5827949bc8fd4b9d4e415bc4e-2"></a><span class="n">three</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">"B"</span><span class="p">,</span> <span class="s2">"C"</span><span class="p">),</span> <span class="p">(</span><span class="s2">"A"</span><span class="p">,</span> <span class="s2">"C"</span><span class="p">)])</span>
<a name="rest_code_313edec5827949bc8fd4b9d4e415bc4e-3"></a><span class="n">three</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="s2">"B"</span><span class="p">,</span> <span class="s2">"C"</span><span class="p">),</span> <span class="p">(</span><span class="s2">"A"</span><span class="p">,</span> <span class="s2">"C"</span><span class="p">)])</span>
<a name="rest_code_313edec5827949bc8fd4b9d4e415bc4e-4"></a><span class="n">networkx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">three</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre>
<img alt="tc_c.png" src="tc_c.png"><p>So the transitivity is three times the count of triangles in the graph divided by all the open triads in the graph.</p>
<div class="math">
\begin{equation*}
transitivity = \frac{3 \times \|\textit{triangles}\|}{\|\textit{open triads}\|}
\end{equation*}
</div>
<p>Looking at our earlier example you can see that there are three triangles and thirteen open triads (to be honest I only found 10).</p>
<pre class="code ipython"><a name="rest_code_c8c5c859be384511acd732d2c42f316c-1"></a><span class="n">networkx</span><span class="o">.</span><span class="n">draw_spring</span><span class="p">(</span><span class="n">graph</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre>
<img alt="triadic_example.png" src="triadic_example.png"><pre class="code ipython"><a name="rest_code_2e0eb9b26a2a4f9ca334c701ef2a7681-1"></a><span class="n">transitivity</span> <span class="o">=</span> <span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span><span class="o">/</span><span class="p">(</span><span class="mi">3</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="mi">13</span><span class="p">)</span>
<a name="rest_code_2e0eb9b26a2a4f9ca334c701ef2a7681-2"></a><span class="k">print</span><span class="p">(</span><span class="n">transitivity</span><span class="p">)</span>
<a name="rest_code_2e0eb9b26a2a4f9ca334c701ef2a7681-3"></a><span class="k">assert</span> <span class="n">transitivity</span> <span class="o">==</span> <span class="n">networkx</span><span class="o">.</span><span class="n">transitivity</span><span class="p">(</span><span class="n">graph</span><span class="p">)</span>
</pre>
<pre class="literal-block">
0.4090909090909091
</pre>
</div>
</div>
<div class="section" id="comparing-averaging-and-transitivity">
<h2>4 Comparing Averaging and Transitivity</h2>
<div class="section" id="one-high-degree-node">
<h3>4.1 One High Degree Node</h3>
<pre class="code ipython"><a name="rest_code_b47b47d136054d86932517e0cdfa86b4-1"></a><span class="n">high_lcc</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<a name="rest_code_b47b47d136054d86932517e0cdfa86b4-2"></a><span class="n">left</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="s2">"AABCCDEEFGGH"</span><span class="p">)</span>
<a name="rest_code_b47b47d136054d86932517e0cdfa86b4-3"></a><span class="n">right</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="s2">"BIIDIIFIIHII"</span><span class="p">)</span>
<a name="rest_code_b47b47d136054d86932517e0cdfa86b4-4"></a><span class="n">high_lcc</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)))</span>
<a name="rest_code_b47b47d136054d86932517e0cdfa86b4-5"></a><span class="n">networkx</span><span class="o">.</span><span class="n">draw_spring</span><span class="p">(</span><span class="n">high_lcc</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre>
<img alt="high_average.png" src="high_average.png"><p>If we look at this graph, the outer nodes all have a clustering coefficient of 1 (each has 1 pair of friends that are friends) while the center node has a coefficient of 1/7, since half the pairs don't have edges between them.</p>
<pre class="code ipython"><a name="rest_code_94f459e94af941e380157a732b81e2c8-1"></a><span class="n">degree_i</span> <span class="o">=</span> <span class="mi">8</span>
<a name="rest_code_94f459e94af941e380157a732b81e2c8-2"></a><span class="n">pairs_of_friends</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">8</span> <span class="o">*</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<a name="rest_code_94f459e94af941e380157a732b81e2c8-3"></a><span class="n">pairs_that_are_friends</span> <span class="o">=</span> <span class="n">Fraction</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<a name="rest_code_94f459e94af941e380157a732b81e2c8-4"></a><span class="n">lcc</span> <span class="o">=</span> <span class="n">pairs_that_are_friends</span><span class="o">/</span><span class="n">pairs_of_friends</span>
<a name="rest_code_94f459e94af941e380157a732b81e2c8-5"></a><span class="k">print</span><span class="p">(</span><span class="n">lcc</span><span class="p">)</span>
</pre>
<pre class="literal-block">
1/7
</pre>
<p>Since there are so many nodes with a coefficient of 1, the average is high.</p>
<pre class="code ipython"><a name="rest_code_0d4758a181d14f4780e0eeefd7807757-1"></a><span class="k">print</span><span class="p">(</span><span class="n">networkx</span><span class="o">.</span><span class="n">average_clustering</span><span class="p">(</span><span class="n">high_lcc</span><span class="p">))</span>
</pre>
<pre class="literal-block">
0.9047619047619047
</pre>
<p>But there are many open triads so the transitivity will be low (transitivity weights nodes with large degree higher, but there's only one node with degree greater than 2).</p>
<pre class="code ipython"><a name="rest_code_2177fdf7e4934d66a791b10a16917588-1"></a><span class="k">print</span><span class="p">(</span><span class="n">networkx</span><span class="o">.</span><span class="n">transitivity</span><span class="p">(</span><span class="n">high_lcc</span><span class="p">))</span>
</pre>
<pre class="literal-block">
0.3333333333333333
</pre>
</div>
<div class="section" id="many-open-pairs">
<h3>4.2 Many Open Pairs</h3>
<pre class="code ipython"><a name="rest_code_a36734f99bf4435b9a9b26b0155355e8-1"></a><span class="n">outer_left</span> <span class="o">=</span> <span class="s2">"ABDEGHJKMN"</span>
<a name="rest_code_a36734f99bf4435b9a9b26b0155355e8-2"></a><span class="n">inner_left</span> <span class="o">=</span> <span class="s2">"PPPPQQQRRS"</span>
<a name="rest_code_a36734f99bf4435b9a9b26b0155355e8-3"></a><span class="n">outer_right</span> <span class="o">=</span> <span class="s2">"BCEFHIKLNO"</span>
<a name="rest_code_a36734f99bf4435b9a9b26b0155355e8-4"></a><span class="n">inner_right</span> <span class="o">=</span> <span class="s2">"QRSTRSTSTT"</span>
<a name="rest_code_a36734f99bf4435b9a9b26b0155355e8-5"></a><span class="n">left</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">outer_left</span> <span class="o">+</span> <span class="n">inner_left</span><span class="p">)</span>
<a name="rest_code_a36734f99bf4435b9a9b26b0155355e8-6"></a><span class="n">right</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">outer_right</span> <span class="o">+</span> <span class="n">inner_right</span><span class="p">)</span>
<a name="rest_code_a36734f99bf4435b9a9b26b0155355e8-7"></a><span class="n">low_average</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<a name="rest_code_a36734f99bf4435b9a9b26b0155355e8-8"></a><span class="n">low_average</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)))</span>
<a name="rest_code_a36734f99bf4435b9a9b26b0155355e8-9"></a><span class="n">networkx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">low_average</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre>
<img alt="low_average.png" src="low_average.png"><p>Here the nodes P, Q, R, S, and T are completely connected (it's hard to see) but all the other nodes are open triads so the average will be low, but the transitivity will be high, because each of the P, Q, R, S, and T form triangles. This should be easier to see if they are plotted separately.</p>
<pre class="code ipython"><a name="rest_code_9ca754d18391420eb28134b4c87ee342-1"></a><span class="n">left</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">inner_left</span><span class="p">)</span>
<a name="rest_code_9ca754d18391420eb28134b4c87ee342-2"></a><span class="n">right</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">inner_right</span><span class="p">)</span>
<a name="rest_code_9ca754d18391420eb28134b4c87ee342-3"></a><span class="n">inner</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
<a name="rest_code_9ca754d18391420eb28134b4c87ee342-4"></a><span class="n">inner</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)))</span>
<a name="rest_code_9ca754d18391420eb28134b4c87ee342-5"></a><span class="n">networkx</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">inner</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre>
<img alt="pqrst.png" src="pqrst.png"><p>Here's the average clustering coefficient (for the complete graph, not the sub-graph I just made).</p>
<pre class="code ipython"><a name="rest_code_b1b3ec09d6ba435b81f46b24e5bbaefc-1"></a><span class="k">print</span><span class="p">(</span><span class="n">networkx</span><span class="o">.</span><span class="n">average_clustering</span><span class="p">(</span><span class="n">low_average</span><span class="p">))</span>
</pre>
<pre class="literal-block">
0.25
</pre>
<p>And here's the transitivity.</p>
<pre class="code ipython"><a name="rest_code_e417093197b54d0996c161216171cf8a-1"></a><span class="k">print</span><span class="p">(</span><span class="n">networkx</span><span class="o">.</span><span class="n">transitivity</span><span class="p">(</span><span class="n">low_average</span><span class="p">))</span>
</pre>
<pre class="literal-block">
0.8571428571428571
</pre>
<p>So which one is the right metric? I guess it just depends.</p>
</div>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../categories/networks/" rel="tag">networks</a></li>
        </ul>
<ul class="pager hidden-print">
<li class="previous">
                <a href="../assignment-2-introduction-to-nltk/" rel="prev" title="Assignment 2 - Introduction to NLTK">Previous post</a>
            </li>
            <li class="next">
                <a href="../distance-in-social-networks/" rel="next" title="Distance in Social Networks">Next post</a>
            </li>
        </ul></nav></aside></article>
</div>
        <!--End of body content-->

        <footer id="footer">
            Contents © 2017         <a href="mailto:necromuralist@gmail.com">necromuralist</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
<a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
<img alt="Creative Commons License BY-NC-SA" style="border-width:0; margin-bottom:12px;" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png"></a>
            
        </footer>
</div>
</div>


            <script src="../../assets/js/all-nocdn.js"></script><script>$('a.image-reference:not(.islink) img:not(.islink)').parent().colorbox({rel:"gal",maxWidth:"100%",maxHeight:"100%",scalePhotos:true});</script><!-- fancy dates --><script>
    moment.locale("en");
    fancydates(0, "YYYY-MM-DD HH:mm");
    </script><!-- end fancy dates -->
</body>
</html>
